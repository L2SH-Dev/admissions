import{p as O,m as L,g as N,aH as K,w as F,u as q,c as S,F as Q,y as ce,D as ie,s as k,z as X,r as J,f as M,A as Y,j as z,a4 as ve,aV as de,E as me,ar as fe,aa as Z,aC as he,ab as $,t as ee,q as ge,i as E,o as pe,a as Se,b as Ve,d as ye}from"./index-C9OlV7N4.js";import{a as Te}from"./getScrollParent-D9sK-TVl.js";import{m as we,a as ke,D as Pe,E as Re,b as Ie,u as be,c as Ce,d as Ae,F as Be,G as Ee,e as Fe}from"./_plugin-vue_export-helper-fWhonGee.js";const Oe=O({renderless:Boolean,...L()},"VVirtualScrollItem"),_e=N()({name:"VVirtualScrollItem",inheritAttrs:!1,props:Oe(),emits:{"update:height":t=>!0},setup(t,a){let{attrs:u,emit:s,slots:l}=a;const{resizeRef:r,contentRect:i}=K(void 0,"border");F(()=>{var c;return(c=i.value)==null?void 0:c.height},c=>{c!=null&&s("update:height",c)}),q(()=>{var c,o;return t.renderless?S(Q,null,[(c=l.default)==null?void 0:c.call(l,{itemRef:r})]):S("div",ce({ref:r,class:["v-virtual-scroll__item",t.class],style:t.style},u),[(o=l.default)==null?void 0:o.call(l)])})}}),xe=-1,De=1,H=100,Me=O({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function ze(t,a){const u=ie(),s=k(0);X(()=>{s.value=parseFloat(t.itemHeight||0)});const l=k(0),r=k(Math.ceil((parseInt(t.height)||u.height.value)/(s.value||16))||1),i=k(0),c=k(0),o=J(),v=J();let y=0;const{resizeRef:P,contentRect:b}=K();X(()=>{P.value=o.value});const T=M(()=>{var e;return o.value===document.documentElement?u.height.value:((e=b.value)==null?void 0:e.height)||parseInt(t.height)||0}),_=M(()=>!!(o.value&&v.value&&T.value&&s.value));let f=Array.from({length:a.value.length}),d=Array.from({length:a.value.length});const m=k(0);let h=-1;function C(e){return f[e]||s.value}const A=de(()=>{const e=performance.now();d[0]=0;const n=a.value.length;for(let g=1;g<=n-1;g++)d[g]=(d[g-1]||0)+C(g-1);m.value=Math.max(m.value,performance.now()-e)},m),te=F(_,e=>{e&&(te(),y=v.value.offsetTop,A.immediate(),w(),~h&&me(()=>{fe&&window.requestAnimationFrame(()=>{G(h),h=-1})}))});Y(()=>{A.clear()});function le(e,n){const g=f[e],p=s.value;s.value=p?Math.min(s.value,n):n,(g!==n||p!==s.value)&&(f[e]=n,A())}function V(e){return e=z(e,0,a.value.length-1),d[e]||0}function U(e){return He(d,e)}let B=0,R=0,x=0;F(T,(e,n)=>{n&&(w(),e<n&&requestAnimationFrame(()=>{R=0,w()}))});let D=-1;function ae(){if(!o.value||!v.value)return;const e=o.value.scrollTop,n=performance.now();n-x>500?(R=Math.sign(e-B),y=v.value.offsetTop):R=e-B,B=e,x=n,window.clearTimeout(D),D=window.setTimeout(j,500),w()}function j(){!o.value||!v.value||(R=0,x=0,window.clearTimeout(D),w())}let W=-1;function w(){cancelAnimationFrame(W),W=requestAnimationFrame(ne)}function ne(){if(!o.value||!T.value)return;const e=B-y,n=Math.sign(R),g=Math.max(0,e-H),p=z(U(g),0,a.value.length),oe=e+T.value+H,I=z(U(oe)+1,p+1,a.value.length);if((n!==xe||p<l.value)&&(n!==De||I>r.value)){const re=V(l.value)-V(p),ue=V(I)-V(r.value);Math.max(re,ue)>H?(l.value=p,r.value=I):(p<=0&&(l.value=p),I>=a.value.length&&(r.value=I))}i.value=V(l.value),c.value=V(a.value.length)-V(r.value)}function G(e){const n=V(e);!o.value||e&&!n?h=e:o.value.scrollTop=n}const se=M(()=>a.value.slice(l.value,r.value).map((e,n)=>({raw:e,index:n+l.value,key:ve(e)&&"value"in e?e.value:n+l.value})));return F(a,()=>{f=Array.from({length:a.value.length}),d=Array.from({length:a.value.length}),A.immediate(),w()},{deep:!0}),{calculateVisibleItems:w,containerRef:o,markerRef:v,computedItems:se,paddingTop:i,paddingBottom:c,scrollToIndex:G,handleScroll:ae,handleScrollend:j,handleItemResize:le}}function He(t,a){let u=t.length-1,s=0,l=0,r=null,i=-1;if(t[u]<a)return u;for(;s<=u;)if(l=s+u>>1,r=t[l],r>a)u=l-1;else if(r<a)i=l,s=l+1;else return r===a?l:s;return i}const Le=O({items:{type:Array,default:()=>[]},renderless:Boolean,...Me(),...L(),...Z()},"VVirtualScroll"),Ge=N()({name:"VVirtualScroll",props:Le(),setup(t,a){let{slots:u}=a;const s=he("VVirtualScroll"),{dimensionStyles:l}=$(t),{calculateVisibleItems:r,containerRef:i,markerRef:c,handleScroll:o,handleScrollend:v,handleItemResize:y,scrollToIndex:P,paddingTop:b,paddingBottom:T,computedItems:_}=ze(t,ee(t,"items"));return ge(()=>t.renderless,()=>{function f(){var h,C;const m=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";i.value===document.documentElement?(document[m]("scroll",o,{passive:!0}),document[m]("scrollend",v)):((h=i.value)==null||h[m]("scroll",o,{passive:!0}),(C=i.value)==null||C[m]("scrollend",v))}pe(()=>{i.value=Te(s.vnode.el,!0),f(!0)}),Y(f)}),q(()=>{const f=_.value.map(d=>S(_e,{key:d.key,renderless:t.renderless,"onUpdate:height":m=>y(d.index,m)},{default:m=>{var h;return(h=u.default)==null?void 0:h.call(u,{item:d.raw,index:d.index,...m})}}));return t.renderless?S(Q,null,[S("div",{ref:c,class:"v-virtual-scroll__spacer",style:{paddingTop:E(b.value)}},null),f,S("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:E(T.value)}},null)]):S("div",{ref:i,class:["v-virtual-scroll",t.class],onScrollPassive:o,onScrollend:v,style:[l.value,t.style]},[S("div",{ref:c,class:"v-virtual-scroll__container",style:{paddingTop:E(b.value),paddingBottom:E(T.value)}},[f])])}),{calculateVisibleItems:r,scrollToIndex:P}}}),Ne=O({color:String,...we(),...L(),...Z(),...ke(),...Pe(),...Re(),...Ie(),...Se(),...Ve()},"VSheet"),Xe=N()({name:"VSheet",props:Ne(),setup(t,a){let{slots:u}=a;const{themeClasses:s}=ye(t),{backgroundColorClasses:l,backgroundColorStyles:r}=be(ee(t,"color")),{borderClasses:i}=Ce(t),{dimensionStyles:c}=$(t),{elevationClasses:o}=Ae(t),{locationStyles:v}=Be(t),{positionClasses:y}=Ee(t),{roundedClasses:P}=Fe(t);return q(()=>S(t.tag,{class:["v-sheet",s.value,l.value,i.value,o.value,y.value,P.value,t.class],style:[r.value,c.value,v.value,t.style]},u)),{}}});export{Ge as V,Xe as a,Ne as m};
