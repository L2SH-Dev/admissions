import{G as V,U as g,M as i,a6 as C,c as s,J as r,I as p,R as a,O as o,a8 as b,P as t,F}from"./index-C9OlV7N4.js";import{_ as y,h as d,j as m}from"./_plugin-vue_export-helper-fWhonGee.js";import{d as f,e as E,V as w,b as k}from"./forwardRefs-D8tYIjEZ.js";import{V as B,a as n}from"./VTextField-DXc2Quau.js";import{V as v}from"./VAlert-DlGNgmAa.js";import{V as S}from"./VContainer-C49pwpmX.js";import{V as D}from"./VSnackbar-gJiRxyij.js";import"./VAvatar-Dh5V0tnL.js";/* empty css              */import"./VOverlay-D2KH32Jk.js";import"./getScrollParent-D9sK-TVl.js";import"./delay-CcW5OwbF.js";import"./lazy-D6UC0faB.js";import"./scopeId-DVNI0gRN.js";const T=V({data(){return{email:"",password:"",passwordVisible:!1,passwordConfirmation:"",rules:{required:u=>!!u||"Обязательное поле",email:u=>/.+@.+\..+/.test(u)||"Email должен быть действительным",passwordLength:u=>u.length>=12||"Пароль должен содержать не менее 12 символов",passwordUppercase:u=>/[A-Z]/.test(u)||"Пароль должен содержать хотя бы одну заглавную букву",passwordLowercase:u=>/[a-z]/.test(u)||"Пароль должен содержать хотя бы одну строчную букву",passwordNumber:u=>/[0-9]/.test(u)||"Пароль должен содержать хотя бы одну цифру",passwordSpecial:u=>/[-_|<>~!@#$%^&*(){}]/.test(u)||"Пароль должен содержать хотя бы один спецсимвол",passwordNoCyrillic:u=>!/[а-яА-ЯёЁ]/.test(u)||"Пароль не должен содержать кириллические буквы",passwordMatch:()=>this.passwordConfirmation===this.password||"Пароли не совпадают"},errorSnackbar:!1,errorText:"",loading:!1,finished:!1}},methods:{async signup(){if(!(await this.$refs.form.validate()).valid)return;this.loading=!0;const{error:e}=await g.auth.signUp({email:this.email,password:this.password,options:{emailRedirectTo:window.location.origin+"/login"}});this.loading=!1,e?(this.errorText=e.message,this.errorSnackbar=!0):this.finished=!0}}});function U(u,e,N,$,A,q){return i(),C(F,null,[s(S,{class:"fill-height d-flex align-center justify-center"},{default:r(()=>[u.finished?(i(),p(w,{key:1,elevation:"0"},{default:r(()=>[s(f,null,{default:r(()=>e[11]||(e[11]=[a("Подтверждение регистрации")])),_:1}),s(k,null,{default:r(()=>[s(v,{variant:"tonal",type:"success"},{default:r(()=>[o("p",null,[e[12]||(e[12]=a(" На почту ")),o("strong",null,t(u.email),1),e[13]||(e[13]=a(" отправлено письмо с подтверждением. "))]),e[14]||(e[14]=o("p",null," Пожалуйста, перейдите по ссылке в письме для завершения регистрации. ",-1))]),_:1})]),_:1})]),_:1})):(i(),p(w,{key:0,class:"pa-5","max-width":"500",width:"100%",loading:u.loading},{default:r(()=>[s(f,null,{default:r(()=>[s(d,{icon:"",color:"grey",to:"/",variant:"text"},{default:r(()=>[s(m,null,{default:r(()=>e[6]||(e[6]=[a("mdi-arrow-left")])),_:1}),e[7]||(e[7]=a(" Назад "))]),_:1}),e[8]||(e[8]=o("h1",{class:"text-center flex-grow-1"},"Регистрация",-1))]),_:1}),s(B,{ref:"form",onSubmit:e[4]||(e[4]=b(()=>{},["prevent"]))},{default:r(()=>[s(n,{modelValue:u.email,"onUpdate:modelValue":e[0]||(e[0]=l=>u.email=l),label:"Email",type:"email",rules:[u.rules.required,u.rules.email]},null,8,["modelValue","rules"]),s(n,{modelValue:u.password,"onUpdate:modelValue":e[2]||(e[2]=l=>u.password=l),label:"Пароль",type:u.passwordVisible?"text":"password",rules:[u.rules.required,u.rules.passwordLength,u.rules.passwordUppercase,u.rules.passwordLowercase,u.rules.passwordNumber,u.rules.passwordSpecial,u.rules.passwordNoCyrillic]},{"append-inner":r(()=>[s(m,{onClick:e[1]||(e[1]=l=>u.passwordVisible=!u.passwordVisible)},{default:r(()=>[a(t(u.passwordVisible?"mdi-eye-off":"mdi-eye"),1)]),_:1})]),_:1},8,["modelValue","type","rules"]),s(n,{modelValue:u.passwordConfirmation,"onUpdate:modelValue":e[3]||(e[3]=l=>u.passwordConfirmation=l),label:"Подтвердите пароль",type:"password",rules:[u.rules.required,u.rules.passwordMatch]},null,8,["modelValue","rules"]),s(d,{color:"primary",type:"submit",class:"mt-4 mx-auto d-block",disabled:u.loading,onClick:u.signup},{default:r(()=>e[9]||(e[9]=[a(" Зарегистрироваться ")])),_:1},8,["disabled","onClick"])]),_:1},512),s(E,null,{default:r(()=>[s(d,{color:"secondary",to:"/login",class:"mt-4 mx-auto",variant:"text"},{default:r(()=>e[10]||(e[10]=[a(" Уже есть аккаунт? Войти ")])),_:1})]),_:1})]),_:1},8,["loading"]))]),_:1}),s(D,{modelValue:u.errorSnackbar,"onUpdate:modelValue":e[5]||(e[5]=l=>u.errorSnackbar=l),timeout:5e3,color:"error"},{default:r(()=>[a(t(u.errorText),1)]),_:1},8,["modelValue"])],64)}const W=y(T,[["render",U],["__scopeId","data-v-b857b48d"]]);export{W as default};
