import{G as j,a9 as ee,K as te,M as u,I as V,J as t,c as e,R as r,N as v,a5 as ae,U as R,O as _,Q as le,P as d,X as se,p as oe,aa as re,b as ne,g as ie,t as de,ab as ue,d as fe,_ as pe,f as me,u as ce,y as ge,ac as ve,r as x,H as _e,o as be,a6 as D,F as A,a7 as O,ad as E}from"./index-C9OlV7N4.js";import{u as J}from"./profile-DlU0X8LR.js";import{d as K,b as T,e as Q,V as N,g as ye}from"./forwardRefs-D8tYIjEZ.js";import{h as $,_ as X,a as ke,u as we,d as he,j as F}from"./_plugin-vue_export-helper-fWhonGee.js";import{V as Ve,a as z}from"./VChip-CNtc4CKe.js";import{a as xe}from"./VAvatar-Dh5V0tnL.js";import{V as q,a as w,c as C,d as h,b as Ce}from"./VList-DfF5koNO.js";import{a as B,V as S}from"./VRow-BJC5J7Kf.js";import{V as Se}from"./VEmptyState-C4-WdWxr.js";import{V as Le}from"./VContainer-C49pwpmX.js";import{b as M}from"./route-block-B_A1xBdJ.js";import"./VOverlay-D2KH32Jk.js";import"./getScrollParent-D9sK-TVl.js";import"./delay-CcW5OwbF.js";import"./lazy-D6UC0faB.js";import"./scopeId-DVNI0gRN.js";import"./VSlideGroup-CCUxaY4J.js";/* empty css              */const De=j({__name:"SignOutDialog",props:{show:{type:Boolean}},emits:["update:show"],setup(l,{emit:n}){const i=l,{show:p}=ee(i),b=te(),y=n,m=J(),g=async()=>{await R.auth.signOut(),m.clearProfileID(),b.push("/")};return(s,a)=>(u(),V(Ve,{modelValue:v(p),"onUpdate:modelValue":a[1]||(a[1]=c=>ae(p)?p.value=c:null),width:s.$vuetify.display.smAndDown?"90%":"auto"},{default:t(()=>[e(N,null,{default:t(()=>[e(K,{class:"text-body-1 text-sm-h6"},{default:t(()=>a[2]||(a[2]=[r("Подтверждение")])),_:1}),e(T,null,{default:t(()=>a[3]||(a[3]=[r("Вы уверены, что хотите выйти?")])),_:1}),e(Q,{class:"gap-2"},{default:t(()=>[e($,{color:"error",size:s.$vuetify.display.smAndDown?"small":"default",onClick:g},{default:t(()=>a[4]||(a[4]=[r(" Выйти ")])),_:1},8,["size"]),e($,{color:"grey",size:s.$vuetify.display.smAndDown?"small":"default",onClick:a[0]||(a[0]=()=>y("update:show",!1))},{default:t(()=>a[5]||(a[5]=[r(" Отмена ")])),_:1},8,["size"])]),_:1})]),_:1})]),_:1},8,["modelValue","width"]))}}),Pe={class:"d-flex flex-sm-row flex-column pa-4 align-sm-start align-center gap-4"},$e={class:"flex-grow-1 min-width-0 text-center text-sm-start"},Be={class:"text-wrap"},Re={class:"text-wrap text-break"},Te=j({__name:"ProfileRegistration",props:{profile:{}},setup(l){const n=l,i=J(),p=new Date(n.profile.created_at).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),b=new Date(n.profile.birth_date).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric"}),y=n.profile.gender==="M"?"Мужской":n.profile.gender==="F"?"Женский":"Не указан",m=R.storage.from("avatars").getPublicUrl(n.profile.avatar),g=()=>{n.profile.approved&&i.setProfile(n.profile)};return(s,a)=>{var c;return u(),V(N,{density:"compact",class:se({"profile-card-moderation":!s.profile.approved,"profile-card-approved":s.profile.approved,"profile-card-selected":((c=v(i).profile)==null?void 0:c.id)===s.profile.id}),onClick:g},{default:t(()=>[_("div",Pe,[s.profile.avatar?(u(),V(xe,{key:0,image:v(m).data.publicUrl,size:"96",class:"mr-4"},null,8,["image"])):le("",!0),_("div",$e,[e(K,{class:"d-flex flex-column pa-0 gap-2"},{default:t(()=>[_("div",Be,d(s.profile.last_name)+" "+d(s.profile.first_name)+" "+d(s.profile.patronymic),1),e(z,{color:s.profile.approved?"success":"warning",class:"align-self-sm-start mt-2 align-self-center"},{default:t(()=>[r(d(s.profile.approved?"Подтвержден":"На модерации"),1)]),_:1},8,["color"])]),_:1}),e(ye,{class:"pa-0 pt-2"},{default:t(()=>[r(d(v(p)),1)]),_:1})])]),e(T,{class:"pa-2"},{default:t(()=>[e(q,{density:"compact",class:"pa-0"},{default:t(()=>[e(B,{dense:"",class:"ma-0"},{default:t(()=>[e(S,{cols:"12",sm:"6",class:"pa-0"},{default:t(()=>[e(w,null,{default:t(()=>[e(C,null,{default:t(()=>[r(d(v(b)),1)]),_:1}),e(h,null,{default:t(()=>a[0]||(a[0]=[r("Дата рождения")])),_:1})]),_:1}),e(w,null,{default:t(()=>[e(C,null,{default:t(()=>[r(d(s.profile.grade),1)]),_:1}),e(h,null,{default:t(()=>a[1]||(a[1]=[r("Класс поступления")])),_:1})]),_:1}),e(w,null,{default:t(()=>[e(C,null,{default:t(()=>[r(d(v(y)),1)]),_:1}),e(h,null,{default:t(()=>a[2]||(a[2]=[r("Пол")])),_:1})]),_:1})]),_:1}),e(S,{cols:"12",sm:"6",class:"pa-0"},{default:t(()=>[e(w,null,{default:t(()=>[e(C,null,{default:t(()=>[r(d(s.profile.parent_phone),1)]),_:1}),e(h,null,{default:t(()=>a[3]||(a[3]=[r("Телефон родителя")])),_:1})]),_:1}),e(w,null,{default:t(()=>[e(C,{class:"text-wrap text-break"},{default:t(()=>[r(d(s.profile.parent_last_name)+" "+d(s.profile.parent_first_name)+" "+d(s.profile.parent_patronymic),1)]),_:1}),e(h,null,{default:t(()=>a[4]||(a[4]=[r("ФИО родителя")])),_:1})]),_:1}),e(w,null,{title:t(()=>[_("div",Re,d(s.profile.old_school),1)]),default:t(()=>[e(h,null,{default:t(()=>a[5]||(a[5]=[r("Предыдущая школа")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(Q,null,{default:t(()=>[e(z,{color:s.profile.june_exam?"success":"grey"},{default:t(()=>a[6]||(a[6]=[r(" Экзамен в июне ")])),_:1},8,["color"]),e(z,{color:s.profile.vmsh?"success":"grey"},{default:t(()=>a[7]||(a[7]=[r(" ВМШ ")])),_:1},8,["color"])]),_:1})]),_:1},8,["class"])}}}),Ie=X(Te,[["__scopeId","data-v-f2f9e140"]]),Ue={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function Ae(l){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${l}`]},[n])}function G(l){const[n,i]=l.split("@");return Array.from({length:i}).map(()=>I(n))}function I(l){let n=[];if(!l)return n;const i=Ue[l];if(l!==i){if(l.includes(","))return H(l);if(l.includes("@"))return G(l);i.includes(",")?n=H(i):i.includes("@")?n=G(i):i&&n.push(I(i))}return[Ae(l,n)]}function H(l){return l.replace(/\s/g,"").split(",").map(I)}const ze=oe({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...re(),...ke(),...ne()},"VSkeletonLoader"),P=ie()({name:"VSkeletonLoader",props:ze(),setup(l,n){let{slots:i}=n;const{backgroundColorClasses:p,backgroundColorStyles:b}=we(de(l,"color")),{dimensionStyles:y}=ue(l),{elevationClasses:m}=he(l),{themeClasses:g}=fe(l),{t:s}=pe(),a=me(()=>I(ve(l.type).join(",")));return ce(()=>{var L;const c=!i.default||l.loading,U=l.boilerplate||!c?{}:{ariaLive:"polite",ariaLabel:s(l.loadingText),role:"alert"};return e("div",ge({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":l.boilerplate},g.value,p.value,m.value],style:[b.value,c?y.value:{}]},U),[c?a.value:(L=i.default)==null?void 0:L.call(i)])}),{}}}),je={class:"text-h6 mb-2"},Ne={class:"d-flex align-center justify-space-between mb-4"},Oe={key:1},Ee={key:1},Fe={class:"d-flex flex-wrap align-center justify-space-between mb-4"},W=j({__name:"index",setup(l){const n=x(""),i=x(""),p=x(""),b=x(!0),y=x(!0),m=_e(),g=x(!1),s=x([]);be(()=>{a(),c()});const a=async()=>{const{data:{user:f}}=await R.auth.getUser();if(!f){console.error("User not found");return}n.value=f.email??"",f.created_at&&(i.value=L(f.created_at)),f.last_sign_in_at&&(p.value=L(f.last_sign_in_at)),b.value=!1},c=async()=>{const{data:f,error:o}=await R.from("profiles").select("*").order("approved",{ascending:!1});o?console.error(o):s.value=f,y.value=!1},U=()=>{m.global.name.value=m.global.current.value.dark?"light":"dark",localStorage.setItem("theme",m.global.name.value)},L=f=>new Date(f).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});return(f,o)=>{const Y=Ie,Z=De;return u(),D(A,null,[e(Le,{class:"py-6 px-4"},{default:t(()=>[e(B,{dense:""},{default:t(()=>[e(S,{cols:"12",md:"6"},{default:t(()=>[b.value?(u(),V(P,{key:0,type:"heading, list-item-three-line@2, divider, actions",class:"pa-4"})):(u(),V(N,{key:1,class:"mb-4 pa-4"},{default:t(()=>[e(T,null,{default:t(()=>[_("div",je,d(n.value),1),e(q,{density:"compact",class:"pa-0"},{default:t(()=>[e(w,null,{prepend:t(()=>[e(F,null,{default:t(()=>o[4]||(o[4]=[r("mdi-calendar")])),_:1})]),default:t(()=>[e(h,null,{default:t(()=>o[5]||(o[5]=[r("Дата регистрации")])),_:1}),e(C,null,{default:t(()=>[r(d(i.value),1)]),_:1})]),_:1}),e(w,null,{prepend:t(()=>[e(F,null,{default:t(()=>o[6]||(o[6]=[r("mdi-login")])),_:1})]),default:t(()=>[e(h,null,{default:t(()=>o[7]||(o[7]=[r("Последний вход")])),_:1}),e(C,null,{default:t(()=>[r(d(p.value),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(Ce),e(T,null,{default:t(()=>[_("div",Ne,[o[8]||(o[8]=_("span",{class:"text-body-1"},"Тема оформления",-1)),e($,{icon:v(m).global.current.value.dark?"mdi-weather-sunny":"mdi-weather-night",variant:"text",size:"small",onClick:U},null,8,["icon"])]),e($,{color:"error",variant:"outlined",block:"",size:f.$vuetify.display.smAndDown?"small":"default",onClick:o[0]||(o[0]=k=>g.value=!0)},{default:t(()=>o[9]||(o[9]=[r(" Выйти из аккаунта ")])),_:1},8,["size"])]),_:1})]),_:1}))]),_:1}),e(S,{cols:"12"},{default:t(()=>[y.value?(u(),V(P,{key:0,class:"mt-4"},{default:t(()=>[e(S,{class:"d-flex mb-4",cols:"12"},{default:t(()=>[e(P,{type:"heading",width:"200",class:"mr-auto"}),e(P,{type:"button",width:"150"})]),_:1}),e(B,null,{default:t(()=>[(u(),D(A,null,O(2,k=>e(S,{key:k,cols:"12",sm:"12",md:"6"},{default:t(()=>[e(P,{type:"avatar, list-item-three-line, list-item-three-line, chip, chip",class:"pa-4 border rounded"})]),_:2},1024)),64))]),_:1})]),_:1})):(u(),D("div",Oe,[s.value.length===0?(u(),V(Se,{key:0,headline:"Профили не найдены",text:"Создайте новый профиль поступающего","action-text":"Создать","onClick:action":o[1]||(o[1]=()=>v(E).push("/profiles/new"))})):(u(),D("div",Ee,[_("div",Fe,[o[11]||(o[11]=_("h2",{class:"mr-2"},"Поступающие",-1)),e($,{color:"primary","prepend-icon":"mdi-plus",class:"mt-2",onClick:o[2]||(o[2]=k=>v(E).push("/profiles/new"))},{default:t(()=>o[10]||(o[10]=[r(" Новый ")])),_:1})]),e(B,null,{default:t(()=>[(u(!0),D(A,null,O(s.value,k=>(u(),V(S,{key:k.id,cols:"12",sm:"12",md:"6"},{default:t(()=>[e(Y,{profile:k},null,8,["profile"])]),_:2},1024))),128))]),_:1})]))]))]),_:1})]),_:1})]),_:1}),e(Z,{show:g.value,"onUpdate:show":o[3]||(o[3]=k=>g.value=k)},null,8,["show"])],64)}}});typeof M=="function"&&M(W);const nt=X(W,[["__scopeId","data-v-be6dbc40"]]);export{nt as default};
